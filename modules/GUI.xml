<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE MudletPackage>
<MudletPackage version="1.001">
	<TriggerPackage>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>Krrrcks: Farb-Trigger</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Kommunikation</name>
				<script>-- Keine Ahnung, ob das besser geht, aber ich will die ganze Zeile einf채rben und nicht nur
-- den "Match".

select_line_color("komm")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#00aaff</mFgColor>
				<mBgColor>#000000</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^(.*) teilt Dir mit: (.*)$</string>
					<string>^Du teilst (.*) mit: (.*)$</string>
					<string>Du sagst:</string>
					<string>sagt:</string>
					<string>Du fragst:</string>
					<string>fragt:</string>
					<string>Wecker klingelt bei Dir.</string>
					<string>denkt:</string>
					<string>Matrix:</string>
					<string>[Team </string>
					<string>ACHTUNG:</string>
					<string>aus der Ferne</string>
					<string>in der Ferne</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Kampf: Zustand</name>
				<script>local zustand = {}

zustand["ist absolut fit."] = 1
zustand["ist schon ein wenig schwaecher."] = 0.9 --Matrix
zustand["ist schon etwas geschwaecht."] = 0.9 -- untersuche
zustand["fuehlte sich heute auch schon besser."] = 0.8 -- Matrix
zustand["fuehlte sich heute schon besser."] = 0.8 -- untersuche
zustand["sieht ein wenig angekratzt aus."] = 0.7 -- Matrix
zustand["ist leicht angeschlagen."] = 0.7 -- untersuche
zustand["ist deutlich angekratzt."] = 0.6 -- Matrix
zustand["sieht nicht mehr taufrisch aus."] = 0.6 -- untersuche
zustand["sieht recht mitgenommen aus."] = 0.5 -- Matrix
zustand["macht einen mitgenommenen Eindruck."] = 0.5 -- untersuche
zustand["schwankt und wankt."] = 0.4 -- Matrix
zustand["wankt bereits bedenklich."] = 0.4 -- untersuche
zustand["war auch schon mal deutlich besser drauf."] = 0.3 -- Matrix
zustand["ist in keiner guten Verfassung."] = 0.3 -- untersuche
zustand["braucht dringend aerztliche Behandlung."] = 0.2 -- Matrix
zustand["braucht dringend einen Arzt."] = 0.2 -- untersuche
zustand["ist schon so gut wie bei Lars."]= 0.1 -- Matrix
zustand["steht auf der Schwelle des Todes."]= 0.1 -- untersuche


local ausgabe = zustand[matches[1]]

if ausgabe then
  ausgabe = " (" .. ausgabe*100 .. "%)"
else
  ausgabe = " (???%)"
end

select_line_color("info")
echo(ausgabe)
resetFormat()</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>ist absolut fit.</string>
					<string>ist schon ein wenig schwaecher.</string>
					<string>ist schon etwas geschwaecht.</string>
					<string>fuehlte sich heute auch schon besser.</string>
					<string>fuehlte sich heute schon besser.</string>
					<string>sieht ein wenig angekratzt aus.</string>
					<string>ist leicht angeschlagen.</string>
					<string>ist deutlich angekratzt.</string>
					<string>sieht nicht mehr taufrisch aus.</string>
					<string>sieht recht mitgenommen aus.</string>
					<string>macht einen mitgenommenen Eindruck.</string>
					<string>wankt bereits bedenklich.</string>
					<string>ist in keiner guten Verfassung.</string>
					<string>braucht dringend einen Arzt.</string>
					<string>steht auf der Schwelle des Todes.</string>
					<string>ist schon so gut wie bei Lars.</string>
					<string>braucht dringend aerztliche Behandlung.</string>
					<string>war auch schon mal deutlich besser drauf.</string>
					<string>schwankt und wankt.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Meldung des Todes / Leiche</name>
				<script>select_line_color("info")

if EK and EK.config.tracking then
  send("lies plakette")
end
if FIGHT.data.modus == "solo" then
  send("lege alles aus leiche in paket in mir")
  send("lege alles aus haufen in paket in mir")
  send("lege alles im raum in paket in mir")
elseif FIGHT.data.modus == "zaubi" then
  send("lege alle komponenten aus leiche in paket in mir")
  send("lege alle komponenten aus haufen in paket in mir")
  send("lege alle komponenten in paket in mir")
end</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>faellt tot zu Boden.</string>
					<string>zerfaellt in ihre Bestandteile.</string>
					<string>stirbt mit einem leisen Rascheln.</string>
					<string>faellt laut scheppernd um.</string>
					<string>zerfaellt in ihre Bestandteile.</string>
					<string>zerfaellt zu Geroell!</string>
					<string>verspritzt noch etwas Schleim und stirbt.</string>
					<string>faellt tot um</string>
					<string>beendet sein kurzes Leben.</string>
					<string>stuerzt ab.</string>
					<string>ein letztes Gebet.</string>
					<string>bricht tot zusammen.</string>
					<string> kippt dann tot hintenueber.</string>
					<string>legt sich auf den Ruecken und verendet.</string>
					<string>Der Sumpftroll zerfaellt.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Meldung des Todes / ohne Leiche</name>
				<script>select_line_color("info")

if EK and EK.config.tracking then
  send("lies plakette")
end
if FIGHT.data.modus == "solo" then
  send("lege alles aus leiche in paket in mir")
  send("lege alles aus haufen in paket in mir")
  send("lege alles im raum in paket in mir")
elseif FIGHT.data.modus == "zaub" then
  send("lege komponenten aus leiche in paket in mir")
  send("lege komponenten aus haufen in paket in mir")
  send("lege komponenten in paket in mir")
end</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>Der Glasgigant zersplittert.</string>
					<string>Der Glastroll zerplatzt in einem Regen aus Scherben.</string>
					<string>Der Glasdrache faellt auseinander und ward nicht mehr gesehen.</string>
					<string>Der Glasmock zersplittert in winzige Teilchen.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Kampf: Flucht</name>
				<script>select_line_color("info")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^Die Angst ist staerker als Du ... Du willst nur noch weg hier.$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Alarm: Post</name>
				<script>select_line_color("alarm")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^Du hast (.*) neue Brief(.*) im Postamt liegen.$</string>
					<string>Ein Postreiter ruft Dir aus einiger Entfernung zu, dass Du neue Post hast!</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Para-/Normalwelt</name>
				<script>-- Pr체fung 체ber Portal 23
local color = "info"
local para = 0

if (matches[3] == "roetlich") then
  color = "alarm"
  para = 1
elseif matches[3] ~= "gruenlich" then
  printError(f"Portal 23 die Farbe {matches[3]}")
end

select_line_color(color)
MainGUI:update_world(para)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^(.*)Du bist hier im Innern einer (.*) schimmernden Kugel,$</string>
					<string>^(.*)Im Innern einer (.*) schimmernden Kugel.$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Bewegung: Ausgaenge</name>
				<script>selectCaptureGroup(1)
set_text_color("info")
resetFormat()</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^Es gibt (.*) sichtbare Ausgaenge:</string>
					<string>^Es gibt einen sichtbaren Ausgang: </string>
					<string>^Es gibt keinen sichtbaren Ausgang.</string>
					<string>^Es gibt keine sichtbaren Ausgaenge.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>HYDRA</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Hydra erscheint</name>
				<script>HYDRA:init()</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ffff00</mFgColor>
				<mBgColor>#000000</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>Die Hydra sinkt langsam in das Tal der Lupinen nieder.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Hydra geht/stirbt</name>
				<script>HYDRA:close()</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>Die Hydra zerfaellt zu einem gigantischen Berg Gebein.</string>
					<string>Die Hydra stirbt in einem Meer von Blut.</string>
					<string>Die Hydra erhebt sich aus dem Tal der Lupinen.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>KlerusGUI</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>GUI_Trigger</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList />
				<regexCodePropertyList />
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Heiligenschein erscheint</name>
					<script>KlerusGUI:update_label("heiligenschein", true)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Ueber Deinem Haupt erscheint ein Heiligenschein.</string>
						<string>Deinem Haupt schwebt doch schon ein Heiligenschein!</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Heiligenschein erlischt</name>
					<script>KlerusGUI:update_label("heiligenschein", false)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ffff00</mFgColor>
					<mBgColor>#0000ff</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Dein Heiligenschein verglimmt.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Elementarsphare an</name>
					<script>KlerusGUI:update_label("elementarsphaere", matches[3])</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>um Dich herum erscheint ein Blase aus kristalline(m|r) (Feuer|Erde|Wasser|Kaelte|Luft)</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>1</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Elementarsphaere geht aus</name>
					<script>KlerusGUI:update_label("elementarsphaere", "Kein")</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ffff00</mFgColor>
					<mBgColor>#0000ff</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Die Elementarsphaere loest sich auf.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Schutzhand an</name>
					<script>KlerusGUI:update_label("schutzhand", true)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>1</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Du stellst mental eine Verbindung zu Kandri her. Nun ruhen ihre schuetzenden</string>
						<string>Du wirst schon geschuetzt.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Schutzhand verschwindet</name>
					<script>KlerusGUI:update_label("schutzhand", false)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ffff00</mFgColor>
					<mBgColor>#0000ff</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Kandris schuetzende Haende verlassen Dich wieder.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="yes" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Waffe geweiht</name>
					<script>KlerusGUI:update_label("weihe", true)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>1</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Lembold Dein Gebet erhoert und die Waffe</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Weihe l채uft ab</name>
					<script>KlerusGUI:update_label("weihe", false)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ffff00</mFgColor>
					<mBgColor>#0000ff</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Der Heilige Zorn Lembolds ist verraucht.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Elementarschild an (ausser Erdschild)</name>
					<script>local element
if matches[1] == "Eine Stichflamme schiesst vor Dir aus dem Boden und umgibt Dich mit einem" then
  element="Feuer"
elseif matches[1] == "Ein ploetzlicher Regenschauer prasselt hernieder, ohne Dich jedoch zu" then
  element = "Wasser"
elseif matches[1] == "Klirrende Kaelte umgibt Dich auf einmal schuetzend." then
  element = "Kaelte"
elseif matches[1] == "Ein starker Wind umtost Dich auf einmal und bildet so einen luftigen Schild." then
  element = "Luft"
elseif matches[1] == "Eine Wolke aus Saeuregasen bildet sich um Dich herum. Einige Blitze erden sich" then
  element = "Saeure"
end

KlerusGUI:update_label("elementarschild", element)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>2</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Eine Stichflamme schiesst vor Dir aus dem Boden und umgibt Dich mit einem</string>
						<string>Ein ploetzlicher Regenschauer prasselt hernieder, ohne Dich jedoch zu</string>
						<string>Eine Wolke aus Saeuregasen bildet sich um Dich herum. Einige Blitze erden sich</string>
						<string>Klirrende Kaelte umgibt Dich auf einmal schuetzend.</string>
						<string>Ein starker Wind umtost Dich auf einmal und bildet so einen luftigen Schild.</string>
						<string>Die Erde zu Deinen Fuessen woelbt sich und bricht auf. Ein irdener Schildschiesst empor und umgibt Dich.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Elementarschild Erde</name>
					<script></script>
					<triggerType>0</triggerType>
					<conditonLineDelta>1</conditonLineDelta>
					<mStayOpen>1</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Die Erde zu Deinen Fuessen woelbt sich und bricht auf. Ein irdener Schild</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
					<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
						<name>zweite Zeile von der Meldung</name>
						<script>KlerusGUI:update_label("elementarschild", "Erde")</script>
						<triggerType>0</triggerType>
						<conditonLineDelta>0</conditonLineDelta>
						<mStayOpen>0</mStayOpen>
						<mCommand></mCommand>
						<packageName></packageName>
						<mFgColor>#ff0000</mFgColor>
						<mBgColor>#ffff00</mBgColor>
						<mSoundFile></mSoundFile>
						<colorTriggerFgColor>#000000</colorTriggerFgColor>
						<colorTriggerBgColor>#000000</colorTriggerBgColor>
						<regexCodeList>
							<string>schiesst empor und umgibt Dich.</string>
						</regexCodeList>
						<regexCodePropertyList>
							<integer>0</integer>
						</regexCodePropertyList>
					</Trigger>
				</TriggerGroup>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Elementarschild aus</name>
					<script>KlerusGUI:update_label("elementarschild", "Kein")</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ffff00</mFgColor>
					<mBgColor>#0000ff</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Der Elementarschild zerfaellt.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Messerkreis an</name>
					<script>KlerusGUI:update_label("messerkreis", true)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Messer, die jeder Bewegung Deines Koerpers folgen.</string>
						<string>Aber Du stehst schon inmitten eines Messerkreises!</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Messerkreis aus</name>
					<script>KlerusGUI:update_label("messerkreis", false)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ffff00</mFgColor>
					<mBgColor>#0000ff</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Der Kreis wirbelnder Messer verschwindet wieder.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Abbildung erscheint</name>
					<script>if len(matches) == 1 or matches[2] == PLAYER.playername() then
  KlerusGUI:update_label("spaltung", true)
end
</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Ein Zerren geht durch Deinen Koerper, als sich neben Dir ein Abbild Deiner</string>
						<string>^Das Abbild (\w*).$</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
						<integer>1</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Abbild loest sich auf</name>
					<script>KlerusGUI:update_label("spaltung", false)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Ein Abbild Mundrons loest sich in Wohlgefallen auf.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Goettermacht erwacht</name>
					<script>KlerusGUI:update_label("goettermacht", true)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Als Dich die Aura umhuellt, spuerst Du </string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Goettermacht erlischt</name>
					<script>KlerusGUI:update_label("goettermacht", true)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ffff00</mFgColor>
					<mBgColor>#0000ff</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Die goettliche Aura verlaesst Dich wieder.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Auren werden schwaecher</name>
					<script></script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#aaffff</mFgColor>
					<mBgColor>#000000</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Deine Elementarsphaere bekommt duenne Stellen.</string>
						<string>Dein Heiligenschein flackert.</string>
						<string>Die wirbelnden Messer werden langsamer.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
			</TriggerGroup>
			<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Sonstige nette Kleriker-Trigger</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList />
				<regexCodePropertyList />
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Talisman-Anzeige</name>
					<script>local zustand = {}
zustand["Ein schwarz angelaufener Talisman"] = 4
zustand["Ein dunkel angelaufener Talisman"] = 12
zustand["Ein angelaufener Talisman"] = 20
zustand["Ein stumpf aussehender Talisman"] = 28
zustand["Ein matter Talisman"] = 36
zustand["Ein matt schimmernder Talisman"] = 44
zustand["Ein schimmernder Talisman"] = 52
zustand["Ein polierter Talisman"] = 60
zustand["Ein hell polierter Talisman"] = 68
zustand["Ein glaenzender Talisman"] = 76
zustand["Ein hell glaenzender Talisman"] = 84
zustand["Ein funkelnder Talisman"] = 92
zustand["Ein strahlender Talisman"] = 100
local ausgabe = zustand[matches[1]]
if ausgabe then
  ausgabe = " (" .. ausgabe .. "%)"
else
  ausgabe = " (???%)"
end
select_line_color("info")
if moveCursor(string.find(line, matches[1]) + #(matches[1]) - 1, getLineNumber()) then
  insertText(ausgabe)
end
resetFormat()</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Ein strahlender Talisman</string>
						<string>Ein schwarz angelaufener Talisman</string>
						<string>Ein dunkel angelaufener Talisman</string>
						<string>Ein angelaufener Talisman</string>
						<string>Ein stumpf aussehender Talisman</string>
						<string>Ein matter Talisman</string>
						<string>Ein matt schimmernder Talisman</string>
						<string>Ein schimmernder Talisman</string>
						<string>Ein polierter Talisman</string>
						<string>Ein hell polierter Talisman</string>
						<string>Ein glaenzender Talisman</string>
						<string>Ein hell glaenzender Talisman</string>
						<string>Ein funkelnder Talisman</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Skilleinschaetzung</name>
					<script>local ausdruck = matches[2]
local dummy = string.split(ausdruck, " ")
local skill = ""
local prozent = ""

if dummy[#dummy] == "gut." then
  if dummy[#dummy - 1] == "unuebertrefflich" then
    skill = "unuebertrefflich gut"
    prozent = "100%"
  elseif dummy[#dummy - 1] == "phantastisch" then
    skill = "phantastisch gut"
    prozent = "90%"
  elseif dummy[#dummy - 1] == "ausserordentlich" then
    skill = "ausserordentlich gut"
    prozent = "80%"
  elseif dummy[#dummy - 1] == "sehr" then
    skill = "schon sehr gut"
    prozent = "75%"
  elseif dummy[#dummy - 1] == "recht" then
    skill = "recht gut"
    prozent = "65%"
  elseif dummy[#dummy - 1] == "ueberdurchschnittlich" then
    skill = "ueberdurchschnittlich gut"
    prozent = "55%"
  elseif dummy[#dummy - 1] == "durchschnittlich" then
    if dummy[#dummy - 1] == "fast" then
      skill = "fast durchschnittlich gut"
      prozent = "45%"
    else
      skill = "durchschnittlich gut"
      prozent = "47.5%"
    end
  elseif dummy[#dummy - 1] == "nicht" then
    if dummy[#dummy - 2] == "noch" then
      skill = "noch nicht gut"
      prozent = "30%"
    elseif dummy[#dummy - 2] == "gar" then
      skill = "gar nicht gut"
      prozent = "20%"
    end
  else
    skill = "gut"
    prozent = "70%"
  end
elseif dummy[#dummy] == "Durchschnitt." then
  if dummy[#dummy - 3] == "besser" then
    if dummy[#dummy - 1] == "etwas" then
      skill = "etwas besser als der Durchschnitt"
      prozent = "52.5%"
    else
      skill = "besser als der Durchschnitt"
      prozent = "60%"
    end
  end
elseif dummy[#dummy] == "unterdurchschnittlich." then
  skill = "nur unterdurchschnittlich"
  prozent = "40%"
elseif dummy[#dummy] == "wenig." then
  if dummy[#dummy - 1] == "nur" then
    skill = "nur wenig"
    prozent = "25%"
  elseif dummy[#dummy - 1] == "sehr" then
    skill = "nur sehr wenig"
    prozent = "15%"
  end
elseif dummy[#dummy] == "kaum." then
  skill = "noch kaum"
  prozent = "10%"
elseif dummy[#dummy] == "schlecht." then
  if dummy[#dummy - 1] == "nicht" then
    skill = "schon nicht schlecht"
    prozent = "35%"
  elseif dummy[#dummy - 1] == "sehr" then
    skill = "sehr schlecht"
    prozent = "5%"
  elseif dummy[#dummy - 1] == "erbaermlich" then
    skill = "erbaermlich schlecht"
    prozent = "0%"
  end
elseif dummy[#dummy] == "hervorragend." then
  skill = "hervorragend"
  prozent = "85%"
elseif dummy[#dummy] == "perfekt." then
  skill = "fast perfekt"
  prozent = "95%"
end
-- Ausgabe ersetzen
selectString(skill, 1)
replace(prozent .. " --|-- " .. skill)</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Du beherrschst (.*)</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>1</integer>
					</regexCodePropertyList>
				</Trigger>
			</TriggerGroup>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>WerwolfGUI</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Begleiter rufen</name>
				<script>WerwolfGUI:update_label_state("begleiter", true)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>Du streckst Dich auf die Hinterbeine und heulst.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Begleiter geht</name>
				<script>WerwolfGUI:update_label_state("begleiter", false)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>heult auf und verschwindet.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Rage beginnt</name>
				<script>WerwolfGUI:update_label("rage", true, "Rage")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>Du verfaellst in Rage.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Rage endet</name>
				<script>WerwolfGUI:update_label("rage", false)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>Deine Wut verraucht.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Menschform</name>
				<script>WerwolfGUI:update_label("form", "Mensch")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>Du bemerkst, wie Du Dich wieder in Deine urspruengliche Form verwandelst.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Menschwolfsform</name>
				<script>WerwolfGUI:update_label("form", "Galbrag", "Galbrag (MW)")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>Du bist jetzt ein Menschwolf.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Halbwolfform</name>
				<script>WerwolfGUI:update_label("form", "Ghourdal", "Ghourdal (HW)")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>Du bist jetzt ein Halbwolf.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Wolfmensch</name>
				<script>WerwolfGUI:update_label("form", "Horpas", "Horpas (WM)")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>Du bist jetzt ein Wolfmensch.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Wolfform</name>
				<script>WerwolfGUI:update_label("form", "Wolf", "Wolf (W)")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>Du bist jetzt ein Wolf.</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
	</TriggerPackage>
	<TimerPackage>
		<Timer isActive="no" isFolder="no" isTempTimer="no" isOffsetTimer="no">
			<name>timer_for_hydra</name>
			<script>HYDRA:decrease_time()</script>
			<command></command>
			<packageName></packageName>
			<time>00:00:01.000</time>
		</Timer>
	</TimerPackage>
	<AliasPackage>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>MainGUI</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>Setze Attribute</name>
				<script>---@pattern #attr &lt;Ausdauer&gt; &lt;Intelligenz&gt; &lt;Staerke&gt; &lt;Geschick&gt;

PLAYER.data.attributes = {
  con=tonumber(matches[2]),
  int=tonumber(matches[3]),
  str=tonumber(matches[4]),
  dex=tonumber(matches[5]),
}
PLAYER:save_data()

main_gui_update_attributes()

PLAYER:info(
f[[Die Attribute wurden wie folgt, gespeichert:
   Ausdauer: {PLAYER.con()}
   Intelligenz: {PLAYER.int()}
   Kraft: {PLAYER.str()}
   Geschick: {PLAYER.dex()}
]]
)</script>
				<command></command>
				<packageName></packageName>
				<regex>^#attr (\d+) (\d+) (\d+) (\d+)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>Plakette aktivieren/deaktivieren</name>
				<script>if EK then
  EK.config.plaketten_lesen = matches[2]=="an"
  if EK.config.plaketten_lesen then
	  send("lies plakette")
  else
    MainGUI.ekanzahl:echo("")
  end
else
  eprint("EK nicht geladen. Ist das Modul installiert?", "EK")
end</script>
				<command></command>
				<packageName></packageName>
				<regex>^#plakette (an|aus)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>Veroede Hydrakoepfe</name>
				<script>---@pattern #hydra &lt;number&gt;
---@desc Dabei gibt &lt;number&gt; die Anzahl an, der wie vielte Kopf jeweils 
---@desc veroedet wird. Beispiele:
---@desc #hydra 0 oder #hydra 1 -&gt; veroede JEDEN Kopf
---@desc #hydra 10 -&gt; veroede jeden 10. Kopf
HYDRA.limit = tonumber(matches[2])
if HYDRA.limit &lt; 2 then
  iprint("Veroede jeden abgeschlagenen Hydrakopf")
  HYDRA.limit = 1
else
  iprint(f"\n\nJeder {HYDRA.limit}.te abgeschlagene Kopf wird veroedet!\n\n")
end</script>
				<command></command>
				<packageName></packageName>
				<regex>^#hydra (\d)$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>MainGUI_Help</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>MainGUI_high_help</name>
				<script>GOR:show_help("MainGUI")</script>
				<command></command>
				<packageName></packageName>
				<regex>^\?MainGUI$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>MainGUI_deep_help</name>
				<script>GOR:show_help("MainGUI", matches[2])</script>
				<command></command>
				<packageName></packageName>
				<regex>^\?MainGUI (\d+(.\d+)*)$</regex>
			</Alias>
		</AliasGroup>
	</AliasPackage>
	<ActionPackage />
	<ScriptPackage>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>PLAYER</name>
			<packageName></packageName>
			<script></script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>PLAYER_init</name>
				<packageName></packageName>
				<script>PLAYER = PLAYER or MundronClassMethods:new{
  _name = "PLAYER",
  _module = "GUI",
  _version = "1.1.0",
  -- Need the default values to build MainGUI but data will be 
  -- loaded later at the end of the module installation.
  data = {
    world=0, 
    attributes={con=-99, str=-99, dex=-99, int=-99}
  },
  files ={profile={["COMPACT"]={
    world=0, 
    attributes={con=-99, str=-99, dex=-99, int=-99
  }}}},
  _fixed_version={MundronClassMethods="1.1.0"}
}

function PLAYER:post_load_data()
  if PLAYER.con() == 99 then
    tempTimer(10, [[iprint("Setze die Attribute mit #attr &lt;Ausdauer&gt; &lt;Intelligenz&gt; &lt;Staerke&gt; &lt;Geschick&gt; fuer die Anzeige", "GUI")]])
  end
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>PLAYER_core</name>
				<packageName></packageName>
				<script>function PLAYER.playername()
  return table.get(gmcp or {}, "MG.char.base.name", getProfileName())
end

function PLAYER.nameplate()
  local info = table.get(gmcp or {}, "MG.char.info", {level=0, guild_level=0})
  local result = f"{PLAYER.playername()} [{info.level}&amp;nbsp;-&amp;nbsp;{info.guild_level}]"
  return result
end

function PLAYER.guild()
  return table.get(gmcp or {}, "MG.char.base.guild")
end

function PLAYER.wimpy()
  return table.get(gmcp or {}, "MG.char.wimpy.wimpy", 0)
end

function PLAYER.wimpy_text()
  local wimpy = PLAYER.wimpy()
  local result
  if wimpy &gt; 0 then
    result = f"Vorsicht: {wimpy}"
  else 
    result = "Vorsicht: Prinz Eisenherz"
  end
  return result
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>PLAYER_vitals</name>
				<packageName></packageName>
				<script>function PLAYER.vitals(field)
  local value = 999
  local prefix = ""
  if field == "poison" then
    value = 0
  end
  if string.startswith(field, "max") then
    prefix = "max"
  end
  return table.get(gmcp or {}, f"MG.char.{prefix}vitals.{field}", value)
end

for _, field in pairs({"hp", "sp", "poison"}) do
  PLAYER[field] = function() return PLAYER.vitals(field) end
  local max_field = f"max_{field}"
  PLAYER[max_field] = function() return PLAYER.vitals(max_field) end
end

function PLAYER.poison_text()
  local poison = PLAYER.poison()
  if poison == 0 then
    return "Gesund"
  elseif poison &lt; 2 then
    return "Gift"
  elseif poison &lt; 4 then
    return "GIFT"
  end
  return "!! G I F T !!"
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>PLAYER_kills</name>
				<packageName></packageName>
				<script>function PLAYER.kills_text()
  if not EK or not EK.config.tracking then
    return "~ Kein EK-Tracking ~"
  end
  local kill_count = EK:kill_count()
  local result = f"EK-Anzahl: {kill_count} [{EK.data.unknown_kills}]"
  local delta = table.get(EK, "data.plate_number", kill_count) - kill_count
  if delta &gt; 0 then
    result = f"{result} (+{delta})"
  elseif delta &lt; 0 then
    result = f"{result} ({delta})"
  end
  return result
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>PLAYER_attributes</name>
				<packageName></packageName>
				<script>local function generic_attribute_values(name)
  if not PLAYER.data.attributes then
    PLAYER.error(PLAYER, "Attributes are not loaded")
  end
  local real_attr = table.get(
    gmcp or {}, 
    f"MG.char.attributes.{name}", 
    PLAYER.data.attributes[name]
  )
  local diff = real_attr - PLAYER.data.attributes[name]
  return real_attr-diff, diff
end

local function generic_attribute_text(name)
  local map = {con="A", str="K", int="I", dex="G"}
  local real_attr, diff = generic_attribute_values(name)
  local result = f"&amp;nbsp;{map[name]}: {real_attr}"
  if diff &gt; 0 then
    result = f"{result}+{diff}"
  elseif diff &lt; 0 then
    result = f"{result}{diff}"
  end
  return result
end


for _, attr in pairs({"con", "str", "int", "dex"}) do
  PLAYER[f"{attr}_text"] = function() return generic_attribute_text(attr) end
  PLAYER[attr] = function() return generic_attribute_values(attr) end
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>PLAYER_position</name>
				<packageName></packageName>
				<script>function PLAYER.world()
  return table.get(PLAYER, "data.world", 0)
end

function PLAYER.change_world(new_world)
  table.set(PLAYER, "data.world", new_world)
end

function PLAYER.room_id()
  return table.get(gmcp, "MG.room.info.id")
end

function PLAYER.room_id_text()
  local _id = PLAYER.room_id() or "~"
  local result = f"[{_id:sub(1, 5)}]"
  return result
end

function PLAYER.region()
  local world = PLAYER.world()
  local result = table.get(gmcp, "MG.room.info.domain") or "~"
  if world &gt; 0 then
    result = f"Para-{world}-{result}"
  end
  return result
end

function PLAYER.node()
  return table.get(PathData or {}, {"node_by_id", PLAYER.room_id() or "~"})
end

function PLAYER.node_factor()
  if type(PLAYER.node()) == "string" then
    return 0.5
  end
  return 0
end

function PLAYER.node_text()
  local node = PLAYER.node() or "~"
  local result = f"&amp;nbsp;WS: {node}"
  return result
end

function PLAYER.room_info()
  return table.get(gmcp, "MG.room.info.short", "~")
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>PLAYER_migration</name>
				<packageName></packageName>
				<script>function PLAYER:migrate_profile(saved_version)
  if self.version_lt(saved_version, "1.0.0") then
    saved_version = "1.0.0"
  end
  if self.version_lt(saved_version, "1.1.0") then
    local old_config = self.pload(self:filename("config"))
    local data = self.pload(self:filename("COMPACT"))
    data.attributes = old_config.attributes
    self.psave(data, self:filename("COMPACT"))
    self.premove(self:filename("config"))
    MundronClassMethods.migrate_profile(PLAYER)
    saved_version = "1.1.0"
  end
  return saved_version
end</script>
				<eventHandlerList />
			</Script>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>HYDRA</name>
			<packageName></packageName>
			<script></script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>HYDRA_init</name>
				<packageName></packageName>
				<script>HYDRA = HYDRA or MundronClassMethods:new{
  _name="HYDRA",
  _module="GUI",
  _version="1.0.0",
  config = {MAX_TIME=2040, NEST_TIME=90},
  data = {
    time = 0,
  },
  _fixed_version={MundronClassMethods="1.1.0"}
}</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>HYDRA_functions</name>
				<packageName></packageName>
				<script>function HYDRA:init()
  HYDRA.data.time = HYDRA.config.MAX_TIME + 1
  enableTimer("timer_for_hydra")
  self:decrease_time()
end

function HYDRA:close()
  disableTimer("timer_for_hydra")
  MainGUI:update_label("hydra", false)
end

local function timeformat(seconds)
  local _, mm, ss = shms(seconds)
  return f"{mm}:{ss}"
end

function HYDRA:is_in_nest()
  return self.data.time + self.config.NEST_TIME &gt; self.config.MAX_TIME
end

function HYDRA:decrease_time()
  if self.data.time == 0 then
    MainGUI:update_label("hydra", false)
    return
  end
  
  self.data.time = math.max(self.data.time - 1, 0)
  if self:is_in_nest() then
    MainGUI:update_label("hydra", "nest")
  else
    MainGUI:update_label("hydra", "tal")
  end
end

-- function for MainGUI
function HYDRA.status()
  if HYDRA.data.time == 0 then
    return ""
  end
  local result = "Hydra (Tal): "
  if HYDRA:is_in_nest() then
    result = "Hydra (Nest): "
  end
  local _, mm, ss = shms(HYDRA.data.time)
  result = f"{result}{mm}:{ss}"
  return result
end
</script>
				<eventHandlerList />
			</Script>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>GUITemplate</name>
			<packageName></packageName>
			<script></script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>GUITemplate_init</name>
				<packageName></packageName>
				<script>GUITemplate = GUITemplate or MundronClassMethods:extend({
  _name="GUITemplate",
  _fixed_version={MundronClassMethods="1.1.0"},
  _version="1.0.0"
})

function GUITemplate:new(init)
  local obj = MundronClassMethods.new(self, init)

  for _, field in pairs({"labels", "containers", "gauges"}) do
    obj[field] = obj[field] or {}
  end
  
  return obj
end

function GUITemplate:build_base()
  self:create_container("_BASE", self.config)

  local border_label = self:create_label("_BORDER_LABEL", {0, 0, "100%", "100%"})
  border_label:setStyleSheet(
    "border-width: 5px;border-style: solid;border-color: rgb(100,50,0);border-radius: 5px;background-color: transparent"
  )

  local image_label = self:create_label("_IMAGE_LABEL", {5,5,-5, -5})
  image_label:setTiledBackgroundImage(getRepoPicturePath("bg.gif"))
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>GUITemplate_container</name>
				<packageName></packageName>
				<script>function GUITemplate:create_container(name, size, parent_name)
  local containers = table.get(self, "containers", {})
  if containers[name] then
    local msg = f"Container with name {name} already exists for {self.name}/{self._name}" 
    printError(msg, true, true)
  end
  local parent = self.containers[parent_name or "_BASE"]
  local x, y, width, height = unpack(size)
  local new_container = Geyser.Container:new(
    {
      name = self:guid(name), x = x, y = y, width = width, height = height,
    },
    parent
  )
  self:log(f"Create container {name} added to container {(parent or {}).name}")
  containers[name] = new_container
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>GUITemplate_label</name>
				<packageName></packageName>
				<script>function GUITemplate:create_label(name, size, text, container_name)
  if self.labels[name] then
    printError(f"Label with name {name} already exists", true, true)
  end
  local x, y, width, height = unpack(size)
  local props =  {name = self:guid(name), x = x, y = y, width = width, height = height}
  local container = self.containers[container_name or "_BASE"]
  local new_label = Geyser.Label:new(props, container)
  self:log(f"Create label {name} added to container {container.name}")
  new_label:setFontSize(9)
  new_label:setColor("transparent")
  if not text then
    text = function(context) return context end
  end
  self.labels[name] = {object=new_label, text=text, states={}}
  self:update_label(name)
  return new_label
end

function GUITemplate:add_label_states(name, states, default)
  table.update(self.labels[name].states, states)
  if default then
    self:update_label_state(name, default)
  end
end

function GUITemplate:update_label_state(name, new_state_id)
  if new_state_id == self.labels[name].current then
    return "black"
  end
  local label_ref = self.labels[name]
  if not label_ref then
    self:error(f"{self._name} has no label state named {name}")
  end
  label_ref.current = new_state_id
  local label = label_ref.object
  local state=label_ref.states[label_ref.current] or {}
  if type(state.bg) == "table" then
    label:setColor(unpack(state.bg))
  elseif type(state.bg) == "string" then
    label:setColor(state.bg)
  end
  return state.fg or "black"
end

function GUITemplate:update_label(name, state_id, ...)
  local label_ref = self.labels[name]
  if state_id == nil then
    state_id = label_ref.current
  end
  local fg = self:update_label_state(name, state_id)
  local label, text = label_ref.object, label_ref.text
  if type(text) == "string" then
    label:echo(f(text), fg)
  elseif type(text) == "function" then
    label:echo(text(...), fg)
  end
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>GUITemplate_gauge</name>
				<packageName></packageName>
				<script>local function relative_value(current, max)
  local result = f"{current}/{max} ({math.floor(100*current/max)}%)"
  return result
end

function GUITemplate:create_gauge(name, size, color, container_name)
  if self.gauges[name] then
    printError(f"Gauge with name {name} already exists", true, true)
  end
  local x, y, width, height = unpack(size)
  local container = self.containers[container_name or "_BASE"]
  self:log(f"Create gauge {name} in the container {container.name}")
  
  -- border and background
  local border = Geyser.Gauge:new(
    {name = self:guid(f"{name}_anzeige_border"), x = x, y = y, width = width, height = 8}, 
    container
  )
  border:setColor(0, 0, 0)
  
  -- Main bar
  local bar = Geyser.Gauge:new(
    {name = self:guid(f"{name}_anzeige"), x = x+1, y = y+1, width = width-1, height = 6}, 
    container
  )
  bar:setColor(unpack(color))
  
  -- label to display status
  local title = Geyser.Label:new(
    {name = self:guid(f"{name}_titel"), x = x, y = y+8, width = width, height = 15}, 
    container
  )
  title:echo(relative_value(999, 999), "black")
  title:setAlignment("c")
  title:setBold(true)
  title:setColor("transparent")
  self.gauges[name] = {title=title, border=border, bar=bar}
  return self.gauges[name]
end

function GUITemplate:update_gauge(name, current_value, last_value, max_value)
  local gauge_ref = self.gauges[name]
  gauge_ref.bar:setValue(current_value, max_value)
  gauge_ref.title:echo(relative_value(current_value, max_value), "black")
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>GUITemplate_misc</name>
				<packageName></packageName>
				<script>function GUITemplate:guid(name)
  local result = f"{self._name}_{self._module}_{name}"
  return result
end

local function profile(object)
  local result = f"position=({object.x}/{object.y}) size=({object.width}/{object.height})"
  return result
end

function GUITemplate:list()
  self:info(f"List of all containers:")
  for name, container in pairs(self.containers) do
    local data = profile(container)
    local text = f"{name}: {data}"
    print(text)
  end
  
  self:info(f"List of all labels:")
  for name, label in pairs(self.labels) do
    local data = profile(label.object)
    local text = f"{name}: {data}"
    print(text)
  end
end

function GUITemplate:refresh()
  for name,_ in pairs(self.labels) do
    self:update_label(name)
  end
end</script>
				<eventHandlerList />
			</Script>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>MainGUI</name>
			<packageName></packageName>
			<script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------
</script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>MainGUI_init</name>
				<packageName></packageName>
				<script>MainGUI = MainGUI or GUITemplate:new{
  _name = "MainGUI",
  _module = "GUI",
  _version = "1.0.0",
  config = {0, -150, 510, 150},
  state = {build=false},
  _fixed_version={MundronClassMethods="1.1.0", GUITemplate="1.0.0"}
}

function MainGUI:init()
  if self.state.build then
    self:info("MainGUI bereits erstellt")
    return
  end
  self:build_base()
  setBorderBottom(self.config[4])
  local margin = 15
  self:create_container("row1", {margin, 10, -1*margin, 17})
  self:create_container("row2", {margin, 30, -1*margin, 17})
  self:create_container("row3", {margin, 50, -1*margin, 25})
  self:create_container("row4", {margin, 75, -1*margin, 25})
  self:create_container("row5", {margin, 100, -1*margin, 17})
  self:create_container("row6", {margin, 120, -1*margin, 17})
  
  --------------------------------------------
  -- row 1
  --------------------------------------------
  self:create_label("nameplate", {0,0, 150, 15}, PLAYER.nameplate, "row1")
  self:add_label_states(
    "nameplate", 
    {normal={bg="transparent"}, highlight={bg={0,200,0,150}}},
    "normal"
  )
  local poison_label = self:create_label("poison", {150, 0, 50, 17}, PLAYER.poison_text, "row1")
  poison_label:setAlignment("c")
  for i=1,10,1 do
    self:add_label_states("poison", {[i]={bg={255,25*i,0,155+10*i}}})
  end
  self:add_label_states("poison", {[0]={bg="transparent"}}, 0)
  local wimpy_label = self:create_label("wimpy", {210, 0, -5, 17}, PLAYER.wimpy_text, "row1")
  
  --------------------------------------------
  -- row 2
  --------------------------------------------
  local kill_label = self:create_label("kills", {0, 0, 150, 17}, PLAYER.kills_text, "row2")
  
  local delta = 60
  for i,field in ipairs({"con", "int", "str", "dex"}) do
    local text_field = f"{field}_text"
    self:create_label(field, {210+(i-1)*delta, 0, delta, 17}, PLAYER[text_field], "row2")
    self:add_label_states(
      field,{
        [-5]={bg="black", fg="white"},
        [-4]={bg={250,50,0,200}},
        [-3]={bg={250,150,0,170}},
        [-2]={bg={250,200,0,150}},
        [-1]={bg={250,250,0,100}},
        [0]={bg="transparent"},
        [1]={bg={0,200,50,100}},
        [2]={bg={0,210,40,150}},
        [3]={bg={0,220,40,250}},
        [4]={bg={0,200,200,150}},
        [5]={bg={0,190,230,250}},
      }, 
      0)
  end
  
  --------------------------------------------
  -- row 3
  --------------------------------------------
  self:create_gauge("hp", {10, 2, -10, 20}, {0, 180, 50}, "row3")
  
  --------------------------------------------
  -- row 4
  --------------------------------------------
  self:create_gauge("sp", {10, 2, -10, 20}, {0, 50, 250}, "row4")
  
  --------------------------------------------
  -- row 5
  --------------------------------------------
  self:create_label("position_background", {0, 0, "100%", "100%"}, nil, "row5")
  self:add_label_states("position_background", {[true] = {bg = "transparent"}, [false]={bg="red"}}, PLAYER.world() == 0)
  self:create_label("room_id", {0, 0, 50, 17}, PLAYER.room_id_text, "row5")
  local node_label = self:create_label("node", {50, 0, 80, 17}, PLAYER.node_text, "row5")
  node_label:setAlignment("c")
  self:add_label_states("node", { 
    [0]={bg="transparent", fg="black"},
    [0.5]={bg={0,220,100,200}, fg="black"},
    [1] = {bg="transparent", fg="white"},
    [1.5]={bg={0,220,100,200}, fg="white"}
  }, PLAYER.node_factor())
  self:create_label("room_info", {135, 0, 235, 17}, PLAYER.room_info, "row5")
  local region_label = self:create_label("region", {370, 0, 100, 17}, PLAYER.region, "row5")
  region_label:setAlignment("c")
  
  for _, field in pairs({"room_id", "room_info", "region"}) do
    self:add_label_states(field, {[0] = {fg = "black"}, [1]={fg="white"}}, math.min(PLAYER.world(), 1))
  end
  
  --------------------------------------------
  -- row 6
  --------------------------------------------
  self:create_label("hydra", {0, 0, 220, 17}, HYDRA.status, "row6")
  self:add_label_states("hydra", {
    [false]={bg="transparent"},
    nest={bg="blue", fg="white"},
    tal={bg="red", fg="white"}
  })
    
  --------------------------------------------
  -- Extra calls
  --------------------------------------------
  
  tempTrigger(
    "Du nimmst schon am Spiel teil!",
    function ()
      if EK.config.tracking then
        tempTimer(2, function() send("lies plakette") end)
      end
    end
  )
    
  self.state.build = true
end

if not MainGUI.state.build then
  MainGUI:init()
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>MainGUI_misc</name>
				<packageName></packageName>
				<script>function MainGUI:update_world(new_world)
  PLAYER.change_world(new_world)
  local max_world = math.min(new_world, 1)
  for _, field in pairs({"position_background", "room_id", "room_info", "region"}) do
    self:update_label(field, max_world)
  end
  self:update_label("node", max_world + PLAYER.node_factor())
end

function MainGUI:refresh()
  main_gui_update_base()
  main_gui_update_vitals()
  main_gui_update_poison()
  main_gui_update_wimpy()
  main_gui_update_room()
  main_gui_update_attributes()
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>main_gui_update_base</name>
				<packageName></packageName>
				<script>
--- Basisdaten erzeugen. Sowohl Name/Level von der MainGUI als auch Wege

function main_gui_update_base()
  MainGUI:update_label("nameplate")
  if PathData then
    PathData.catch_path_end_action = f("{PLAYER.playername()} {PathData.path_end_action}") 
  end
end</script>
				<eventHandlerList>
					<string>gmcp.MG.char.base</string>
					<string>gmcp.MG.char.info</string>
				</eventHandlerList>
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>main_gui_update_vitals</name>
				<packageName></packageName>
				<script>local function ivalue(a, b, c, t)
  -- for t from 0 to 1/3 the value goes linearly from a to b
  -- and for t from 1/3 to 1 the value goes linearly from b to c
  local result
  if 3 * t &lt; 1 then
    result = a + 3 * (b - a) * t
  else
    result = b + (c - b) * (3 * t - 1) / 2
  end
  return result - (result % 1)
end

function main_gui_hp_anzeige_faerben()
  -- Je nach LP Verlust wird Farbe gruen/gelb/rot
  local lp_quote = PLAYER.hp() / PLAYER.max_hp()
  MainGUI.gauges.hp.bar:setColor(ivalue(255, 200, 0, lp_quote), ivalue(0, 200, 180, lp_quote), 50)
end

function main_gui_hp_anzeige_entblinken()
  table.set(MainGUI, "data.hp.flash", false)
  main_gui_hp_anzeige_faerben()
end

function main_gui_hp_anzeige_blinken(dauer)
  table.set(MainGUI, "data.hp.flash", true)
  MainGUI.gauges.hp.bar:setColor(255, 0, 50)
  -- rot
  tempTimer(dauer, [[ main_gui_hp_anzeige_entblinken() ]])
end

function main_gui_update_vitals()
  -- falls man stirbt, landet man in Normal:
  if PLAYER.world() &gt; 0 and PLAYER.hp() &lt; 0 then
    MainGUI:update_world(new_world)
  end
  
  -- Treffer? Dann LP Balken blinken lassen
  if PLAYER.hp() - table.get(PLAYER, "data.hp", PLAYER.hp()) &lt; 0 then
    main_gui_hp_anzeige_blinken(0.2)
  elseif not table.get(MainGUI, "data.hp.flash") then
    main_gui_hp_anzeige_faerben()
  end
  
  -- Werte der Balken aktualisieren
  for _, vital in pairs({"hp", "sp"}) do
    local old_value = table.get(PLAYER, {"data", vital}, PLAYER[f"max_{vital}"]())
    MainGUI:update_gauge(vital, PLAYER[vital](), old_value, PLAYER[f"max_{vital}"]())
    table.set(PLAYER, {"data", vital}, PLAYER[vital]())
  end
    
  
end
</script>
				<eventHandlerList>
					<string>gmcp.MG.char.vitals</string>
					<string>gmcp.MG.char.maxvitals</string>
				</eventHandlerList>
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>main_gui_update_poison</name>
				<packageName></packageName>
				<script>function main_gui_update_poison()
  MainGUI:update_label("poison", PLAYER.poison())
end</script>
				<eventHandlerList>
					<string>gmcp.MG.char.vitals</string>
				</eventHandlerList>
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>main_gui_update_wimpy</name>
				<packageName></packageName>
				<script>function main_gui_update_wimpy()
  MainGUI:update_label("wimpy")
end</script>
				<eventHandlerList>
					<string>gmcp.MG.char.wimpy</string>
				</eventHandlerList>
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>main_gui_update_room</name>
				<packageName></packageName>
				<script>function main_gui_update_room()
  MainGUI:update_label("room_id")
  MainGUI:update_label("node", PLAYER.node_factor())
  MainGUI:update_label("room_info")
  MainGUI:update_label("region")
end</script>
				<eventHandlerList>
					<string>gmcp.MG.room</string>
				</eventHandlerList>
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>main_gui_update_attributes</name>
				<packageName></packageName>
				<script>function main_gui_update_attributes()
  for _, field in pairs({"con", "int", "str", "dex"}) do
    local _, diff = PLAYER[field]()
    diff = math.min(math.max(diff, -5), 5)
    MainGUI:update_label(field, diff)
  end
end</script>
				<eventHandlerList>
					<string>gmcp.MG.char.attributes</string>
				</eventHandlerList>
			</Script>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>ExitGUI</name>
			<packageName></packageName>
			<script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------
</script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>ExitGUI</name>
				<packageName></packageName>
				<script>ExitGUI = ExitGUI or GUITemplate:new{
  _name = "ExitGUI",
  _module = "GUI",
  _version = "1.0.0",
  config = {-150, -150, 150, 150},
  data = {directions={}, current={}},
  state = {build=false},
  _fixed_version={MundronClassMethods="1.1.0", GUITemplate="1.0.0"}
}

function ExitGUI:init()
  if self.state.build then
    self:info("ExitGUI bereits erstellt")
    return
  end
  self:build_base()
  
  for _, post in pairs({"en", "oben", "unten"}) do
    for xd, main in ipairs({"west", "", "ost"}) do
      for yd, pre in ipairs({"nord", "", "sued"}) do
        local dir = f"{pre}{main}{post}"
        if dir == "en" then
          dir = "raus"
        end
        self.data.directions[dir] = true
        local label = self:create_label(dir, {-25+xd*40, -25+yd*40, 40, 40})
        label:setColor("transparent")
        label:setBackgroundImage(getRepoPicturePath(f"{dir}.png"))
        label:hide()
      end
    end
  end
    
  self.state.build = true
end

ExitGUI:init()</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>ExitGUI_misc</name>
				<packageName></packageName>
				<script>function ExitGUI:refresh()
  ExitGUI.data.current = {}
  for dir, _ in pairs(ExitGUI.data.directions) do
    ExitGUI.labels[dir].object:hide()
  end
  update_exits()
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>update_exits</name>
				<packageName></packageName>
				<script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------

function update_exits()
  local newdir = {}
  local nextdir = {}
  -- Pruefe, welche Ausgaenge wegkommen und welche hinzukommen
  for _, dir in ipairs(gmcp.MG.room.info.exits) do
    -- in ExitGUI.data.current waren alle vorigen Ausgaenge.
    -- falls eines der vorigen Ausgaenge wieder ein Ausgang
    -- ist, dann brauchen wir nichts zu aendern. Deswegen
    -- werden diese aus der Liste geloescht, so dass am Ende
    -- ExitGUI.data.current nur die Ausgaenge enthaelt, die es jetzt
    -- nicht mehr gibt, also geloescht werden muessen.
    -- Andererseits haben wir einen neuen Ausgang, den wir
    -- hinzufuegen muessen, was in der zusaetzlichen Liste
    -- newdir gespeichert wird.
    if ExitGUI.data.directions[dir] then -- nur zulaessige Richtungen beachten
      if ExitGUI.data.current[dir] then
        ExitGUI.data.current[dir] = nil
      else
        newdir[dir] = true
      end
      nextdir[dir] = true
    end
  end
  -- Alle Ausgaenge vom Vorraum, die es hier nicht mehr gibt,
  -- muessen geloescht werden.
  for dir, _ in pairs(ExitGUI.data.current) do
    ExitGUI.labels[dir].object:hide()
  end
  -- Ausgaenge die neu hinzu kommen muessen angezeigt werden.
  for dir, _ in pairs(newdir) do
    ExitGUI.labels[dir].object:show()
  end
  -- schliesslich speichern wir nun in AK.directions alle Ausgaenge
  -- diesen Raumes um es bei Raumaenderung wieder nuetzen zu koennen.
  ExitGUI.data.current = nextdir
end</script>
				<eventHandlerList>
					<string>gmcp.MG.room.info</string>
				</eventHandlerList>
			</Script>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>KlerusGUI</name>
			<packageName></packageName>
			<script></script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>KlerusGUI_init</name>
				<packageName></packageName>
				<script>KlerusGUI = KlerusGUI or GUITemplate:new{
  _name = "KlerusGUI",
  _shortname = "Klerus",
  _module = "GUI",
  _version = "1.0.0",
  config = {510, -150, 100, 150},
  state = {build=false},
  hidden = false,
  _fixed_version={MundronClassMethods="1.1.0", GUITemplate="1.0.0"}
}

function KlerusGUI:init()
  if self.state.build then
    self:info("KlerusGUI bereits erstellt")
    return
  end
  self:build_base()
  
  local margin = 15
  self:create_container("row1", {margin, 10, -1*margin, 17})
  self:create_container("row2", {margin, 45, -1*margin, 17})
  self:create_container("row3", {margin, 75, -1*margin, 17})
  self:create_container("row4", {margin, 105, -1*margin, 17})

  --------------------------------------------
  -- row 1
  --------------------------------------------
  self:create_label("elementarsphaere", {0, 0, 30, 20}, "EW", "row1")
  self:add_label_states("elementarsphaere", {
    Kein={bg="transparent"},
    Feuer={bg={255,0,0}, fg="white"},
    Erde={bg={170,85,0}, fg="white"},
    Wasser={bg={0,0,255}, fg="white"},
    Kaelte={bg={0,255,255}},
    Luft={bg="white"}
  })
  self:create_label("heiligenschein", {40, 0, 30, 20}, "HS", "row1")
  self:add_label_states("heiligenschein", {
    [true]={bg="yellow"}, [false]={bg="transparent"}
  })
  
  --------------------------------------------
  -- row 2
  --------------------------------------------
  self:create_label("elementarschild", {0, 0, 30, 20}, "ES", "row2")
  self:add_label_states("elementarschild", {
    Kein={bg="transparent"},
    Feuer={bg={255,0,0}, fg="white"},
    Erde={bg={170,85,0}, fg="white"},
    Wasser={bg={0,0,255}, fg="white"},
    Kaelte={bg={0,255,255}},
    Luft={bg="white"},
    Saeure={bg="yellow"}
  })
  self:create_label("schutzhand", {40, 0, 30, 20}, "SH", "row2")
  self:add_label_states("schutzhand", {
    [true]={bg="white"}, [false]={bg="transparent"}
  })
  --------------------------------------------
  -- row 3
  --------------------------------------------
  self:create_label("weihe", {0, 0, 30, 20}, "WW", "row3")
  self:add_label_states("weihe", {
    [true]={bg="white"}, [false]={bg="transparent"}
  })
  self:create_label("messerkreis", {40, 0, 30, 20}, "MK", "row3")
  self:add_label_states("messerkreis", {
    [true]={bg="white"}, [false]={bg="transparent"}
  })
  --------------------------------------------
  -- row 4
  --------------------------------------------
  self:create_label("goettermacht", {0, 0, 30, 20}, "GM", "row4")
  self:add_label_states("goettermacht", {
    [true]={bg="white"}, [false]={bg="transparent"}
  })
  self:create_label("spaltung", {40, 0, 30, 20}, "SP", "row4")
  self:add_label_states("spaltung", {
    [true]={bg={255,170,125}}, [false]={bg="transparent"}
  })
  
  for _,label_ref in pairs(self.labels) do
    label_ref.object:setAlignment("c")
  end
    
  self.state.build = true
end

KlerusGUI:init()</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>klerus_gui_update_base</name>
				<packageName></packageName>
				<script>function klerus_gui_update_base()
  if KlerusGUI.hidden or not PLAYER.guild() or PLAYER.guild() == "klerus" then
    return
  end
  KlerusGUI:log(f"Hide because found guild is {PLAYER.guild()}")
  KlerusGUI.containers["_BASE"]:hide()
  KlerusGUI.hidden = true
end</script>
				<eventHandlerList>
					<string>gmcp.MG.char.base</string>
				</eventHandlerList>
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>update_klerus_spaltung</name>
				<packageName></packageName>
				<script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------

function update_klerus_spaltung()
  KlerusGUI:update_label_state("spaltung", false)
end</script>
				<eventHandlerList>
					<string>gmcp.MG.room</string>
				</eventHandlerList>
			</Script>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>WerwolfGUI</name>
			<packageName></packageName>
			<script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external scripts --
-------------------------------------------------
</script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>WerwolfGUI_init</name>
				<packageName></packageName>
				<script>WerwolfGUI = WerwolfGUI or GUITemplate:new{
  _name = "WerwolfGUI",
  _module = "GUI",
  _version = "1.0.0",
  config = {510, -150, 100, 150},
  state = {build=false},
  hidden = false,
  _fixed_version={MundronClassMethods="1.1.0", GUITemplate="1.0.0"}
}

function WerwolfGUI:init()
  if self.state.build then
    self:info("WerwolfGUI bereits erstellt")
    return
  end
  self:build_base()
  
  self:create_label("form", {15, 15, 70, 20}, function(t) return t or "Mensch (M)" end)
  self:add_label_states("form", {
    Mensch={bg="transparent"},
    Galbrag={bg={100,255,50}},
    Ghourdal={bg={150,200,50}},
    Horpas={bg={200,150,50}},
    Wolf={bg={255,100,50}}
  })
  self:create_label("rage", {15, 45, 70, 20}, function(t) return t or "ruhig" end)
  self:add_label_states("rage", {
    [true]={bg={230,230,30}},
    [false]={bg="transparent"}
  })
  
  self:create_label("begleiter", {15, 75, 70, 20}, "Begleiter")
  self:add_label_states("begleiter", {
    [true]={bg={100,255,50}},
    [false]={bg="transparent"}
  })
  
  for _,label_ref in pairs(self.labels) do
    label_ref.object:setAlignment("c")
  end
  
  self.state.build = true
end

WerwolfGUI:init()</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>werwolf_gui_update_base</name>
				<packageName></packageName>
				<script>function werwolf_gui_update_base()
  if WerwolfGUI.hidden or not PLAYER.guild() or PLAYER.guild() == "werwoelfe" then
    return
  end
  WerwolfGUI:log(f"Hide because found guild is {PLAYER.guild()}")
  WerwolfGUI.containers["_BASE"]:hide()
  WerwolfGUI.hidden = true
end</script>
				<eventHandlerList>
					<string>gmcp.MG.char.base</string>
				</eventHandlerList>
			</Script>
		</ScriptGroup>
	</ScriptPackage>
	<KeyPackage />
	<HelpPackage>
		<helpURL></helpURL>
	</HelpPackage>
</MudletPackage>
